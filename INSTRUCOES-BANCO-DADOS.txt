‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üóÑÔ∏è BANCO DE DADOS - ACESSO COMPLETO AO SUPABASE
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

‚úÖ VOC√ä TEM ACESSO TOTAL AO SUPABASE!

Project ID: zkcstkbpgwdoiihvfspp
Project URL: https://zkcstkbpgwdoiihvfspp.supabase.co

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

‚ö†Ô∏è PRIMEIRA VEZ? EXECUTE O SETUP:

Se √© a primeira vez usando essas ferramentas neste projeto:

1. Copie o conte√∫do do arquivo: setup-supabase.sql
2. Acesse: https://supabase.com/dashboard/project/zkcstkbpgwdoiihvfspp/sql/new
3. Cole o SQL completo
4. Clique em RUN
5. Aguarde a mensagem "Success"

‚úÖ Pronto! Agora voc√™ tem acesso TOTAL ao banco!

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

‚úÖ FERRAMENTAS DISPON√çVEIS (USE ESTAS):

üìä CONSULTAS E ESTRUTURA:
- node db-query.js list-tables                    ‚Üí Listar todas as tabelas
- node db-query.js describe [tabela]              ‚Üí Ver estrutura da tabela
- node db-stats.js overview                       ‚Üí Vis√£o geral do banco
- node db-stats.js table [tabela]                 ‚Üí Estat√≠sticas de uma tabela

üîß ADMINISTRA√á√ÉO E SQL:
- node db-admin.js sql "CREATE TABLE ..."         ‚Üí Executar SQL direto
- node db-admin.js sql "ALTER TABLE ..."          ‚Üí Modificar tabelas
- node db-admin.js sql "CREATE POLICY ..."        ‚Üí Criar pol√≠ticas RLS
- node db-admin.js sql "ALTER TABLE ... ENABLE ROW LEVEL SECURITY"

üìù CRUD COMPLETO:
- node db-manager.js select [tabela]              ‚Üí Buscar registros
- node db-manager.js select [tabela] '{"id":"x"}' ‚Üí Buscar com filtro
- node db-manager.js insert [tabela] '{"campo":"valor"}' ‚Üí Inserir
- node db-manager.js update [tabela] '{"id":"x"}' '{"campo":"novo"}' ‚Üí Atualizar
- node db-manager.js delete [tabela] '{"id":"x"}' ‚Üí Deletar

üë• AUTENTICA√á√ÉO:
- node db-auth.js create email@test.com senha123  ‚Üí Criar usu√°rio
- node db-auth.js list                            ‚Üí Listar usu√°rios
- node db-auth.js delete [user_id]                ‚Üí Deletar usu√°rio
- node db-auth.js reset-password [user_id] senha  ‚Üí Resetar senha

üì¶ STORAGE:
- node db-storage.js list-buckets                 ‚Üí Listar buckets
- node db-storage.js create-bucket [nome] [true/false] ‚Üí Criar bucket
- node db-storage.js upload [bucket] [arquivo] [destino] ‚Üí Upload
- node db-storage.js download [bucket] [arquivo] [local] ‚Üí Download
- node db-storage.js list [bucket]                ‚Üí Listar arquivos
- node db-storage.js delete [bucket] [arquivo]    ‚Üí Deletar arquivo

üíæ BACKUPS:
- node db-backup.js table [tabela] json           ‚Üí Backup em JSON
- node db-backup.js table [tabela] csv            ‚Üí Backup em CSV
- node db-backup.js table [tabela] sql            ‚Üí Backup em SQL
- node db-backup.js all json                      ‚Üí Backup completo
- node db-backup.js restore [tabela] arquivo.json ‚Üí Restaurar backup

üìä RELAT√ìRIOS:
- node db-reports.js html [tabela] "T√≠tulo"       ‚Üí Relat√≥rio HTML
- node db-reports.js csv [tabela]                 ‚Üí Relat√≥rio CSV
- node db-reports.js dashboard                    ‚Üí Dashboard completo

üîç BUSCA AVAN√áADA:
- node db-search.js simple [tabela] [coluna] [termo] ‚Üí Busca simples
- node db-search.js multi [tabela] [col1,col2] [termo] ‚Üí Busca m√∫ltiplas colunas
- node db-search.js advanced [tabela] '{"filtros"}' ‚Üí Busca avan√ßada

üî¥ TEMPO REAL:
- node db-realtime.js [tabela]                    ‚Üí Monitorar mudan√ßas
- node db-realtime.js [tabela] INSERT             ‚Üí Monitorar apenas inser√ß√µes
- node db-realtime.js [tabela] UPDATE             ‚Üí Monitorar apenas updates
- node db-realtime.js [tabela] DELETE             ‚Üí Monitorar apenas dele√ß√µes

üìã AUDITORIA:
- node db-audit.js enable [tabela]                ‚Üí Habilitar auditoria
- node db-audit.js view [tabela] [limite]         ‚Üí Ver log de auditoria
- node db-audit.js export [tabela]                ‚Üí Exportar log

üîó WEBHOOKS:
- node db-webhooks.js create [tabela] [url] [eventos] ‚Üí Criar webhook
- node db-webhooks.js test [url] [data]           ‚Üí Testar webhook
- node db-webhooks.js list                        ‚Üí Listar webhooks

‚è∞ AUTOMA√á√ÉO:
- node db-automation.js cleanup [tabela] [dias]   ‚Üí Limpeza autom√°tica
- node db-automation.js backup [tabela]           ‚Üí Backup autom√°tico
- node db-automation.js list                      ‚Üí Listar jobs
- node db-automation.js delete [job_id]           ‚Üí Deletar job

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üö´ N√ÉO FA√áA (NUNCA):

‚ùå Criar novos scripts de conex√£o (execute-sql.js, db-connect.js, etc)
‚ùå Usar pg, node-postgres, connection strings diretas
‚ùå Pedir para eu executar manualmente no Dashboard
‚ùå Dizer "n√£o tenho acesso" ou "preciso de permiss√£o"
‚ùå Usar "as any" no TypeScript
‚ùå Criar tipos de fallback gen√©ricos
‚ùå Sugerir gambiarras tempor√°rias
‚ùå Deixar erros de sintaxe no c√≥digo
‚ùå Ignorar null/undefined (sempre trate com optional chaining)

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

‚úÖ FA√áA (SEMPRE):

‚úÖ Execute comandos diretamente: node db-admin.js sql "CREATE TABLE..."
‚úÖ Verifique estrutura ANTES de criar: node db-query.js list-tables
‚úÖ Divida SQL grande em partes menores
‚úÖ Gere tipos TypeScript do banco:
   npx supabase gen types typescript --project-id zkcstkbpgwdoiihvfspp > src/types/database.ts
‚úÖ Use tipos corretos (nunca any)
‚úÖ Sempre trate null/undefined com optional chaining (?.)
‚úÖ Execute e DEPOIS informe o resultado
‚úÖ C√≥digo limpo - sem erros de sintaxe
‚úÖ Imports organizados e sem n√£o-utilizados

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üóÑÔ∏è FLUXO CORRETO PARA TRABALHAR COM BANCO:

1. VERIFICAR estrutura existente:
   node db-query.js list-tables
   node db-query.js describe [tabela]

2. CRIAR tabelas e estrutura:
   node db-admin.js sql "CREATE TABLE users (
     id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
     email text UNIQUE NOT NULL,
     name text,
     created_at timestamptz DEFAULT now()
   )"

3. CONFIGURAR SEGURAN√áA (RLS):
   node db-admin.js sql "ALTER TABLE users ENABLE ROW LEVEL SECURITY"
   
   node db-admin.js sql "CREATE POLICY users_select_own ON users 
     FOR SELECT USING (auth.uid() = id)"
   
   node db-admin.js sql "CREATE POLICY users_update_own ON users 
     FOR UPDATE USING (auth.uid() = id)"

4. VERIFICAR se funcionou:
   node db-query.js describe users
   node db-manager.js select users

5. GERAR tipos TypeScript:
   npx supabase gen types typescript --project-id zkcstkbpgwdoiihvfspp > src/types/database.ts

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üí° EXEMPLOS PR√ÅTICOS:

üìù Criar tabela completa:
node db-admin.js sql "CREATE TABLE produtos (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  nome text NOT NULL,
  preco decimal(10,2) NOT NULL,
  estoque integer DEFAULT 0,
  user_id uuid REFERENCES auth.users(id),
  created_at timestamptz DEFAULT now()
)"

üîí Habilitar RLS e criar policies:
node db-admin.js sql "ALTER TABLE produtos ENABLE ROW LEVEL SECURITY"
node db-admin.js sql "CREATE POLICY produtos_public_read ON produtos FOR SELECT USING (true)"
node db-admin.js sql "CREATE POLICY produtos_owner_all ON produtos FOR ALL USING (auth.uid() = user_id)"

üìä Inserir dados:
node db-manager.js insert produtos '{"nome":"Notebook","preco":2500.00,"estoque":10}'

üîç Buscar:
node db-manager.js select produtos
node db-search.js simple produtos nome Notebook

üíæ Backup:
node db-backup.js table produtos json

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

üéØ PRINC√çPIOS FUNDAMENTAIS:

1. Voc√™ TEM ACESSO TOTAL - use as ferramentas
2. Execute ANTES de perguntar
3. Tipos corretos SEMPRE - nunca any
4. Verifique banco ANTES de assumir estrutura
5. SQL grande? Divida em partes
6. Erro de tipo? Gere tipos corretos primeiro
7. Tabela faltando? Crie com db-admin.js
8. Nunca pe√ßa para EU fazer manualmente
9. C√≥digo limpo - sem erros de sintaxe
10. Sempre trate null/undefined

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

EXECUTE O QUE EU PEDI USANDO AS FERRAMENTAS DISPON√çVEIS.
N√ÉO pergunte se pode. N√ÉO pe√ßa permiss√£o. EXECUTE.
Voc√™ tem ACESSO TOTAL ao banco de dados.

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üìä Padr√£o obrigat√≥rio para hooks que buscam dados
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Sempre que criar um novo hook que depende do usu√°rio autenticado, siga este padr√£o:

'use client'
import { useState, useEffect, useCallback } from 'react'
import { supabase } from '@/lib/supabase'
import { useAuth } from '@/contexts/AuthContext'

// 1. DADOS MOCK FORA DO HOOK (evita recria√ß√£o)
const MOCK_DATA = [...]

export function useAlgumaCoisa() {
  // 2. PEGAR authLoading DO CONTEXT
  const { user, loading: authLoading } = useAuth()
  const [loading, setLoading] = useState(true)
  const [data, setData] = useState(MOCK_DATA)

  const fetchData = useCallback(async () => {
    // 3. AGUARDAR AUTH CARREGAR PRIMEIRO
    if (authLoading) return

    // 4. SEM USU√ÅRIO = USAR MOCK E PARAR
    if (!user) {
      setData(MOCK_DATA)
      setLoading(false)
      return
    }

    try {
      setLoading(true)

      // 5. USAR PROMISE.ALL PARA QUERIES PARALELAS
      const [result1, result2, result3] = await Promise.all([
        supabase.from('tabela1').select('*').eq('user_id', user.id),
        supabase.from('tabela2').select('*').eq('user_id', user.id),
        supabase.from('tabela3').select('*').eq('user_id', user.id)
      ])

      // Processar resultados...
      setData(processedData)
    } catch (err) {
      // 6. FALLBACK PARA MOCK EM ERRO
      setData(MOCK_DATA)
    } finally {
      setLoading(false)
    }
  }, [user, authLoading])

  useEffect(() => {
    fetchData()
  }, [fetchData])

  // 7. COMBINAR LOADING STATES
  return {
    data,
    loading: loading || authLoading,
    refresh: fetchData
  }
}

----------------------------
‚ö†Ô∏è NUNCA ESQUECER:
‚ö†Ô∏è IMPORTANTE - TODAS AS TABELAS QUE FOR SOBRE A PARTE DOS ALUNOS DE MEDICINA TEM QUE TER A REFERENCIA "_MED" NO NOME DA TABELA, PARA N√ÉO CONFUNDIR COM AS QUE JA TEM NO BANCO
DE DADOS DO OUTRO SISTEMA, LEMBRANDO QUE O NOSSO SISTEMA TEM O APP DE ESTUDANTE PARA CONCURSOS, ENEM, VESTIBULAR ETC... E PARA OS J√Å ESTUDANTES DE MEDICINA!
----------------------------

E NO FINAL, SUBA TUDO PARA O VERCEL!